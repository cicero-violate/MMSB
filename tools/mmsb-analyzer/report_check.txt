Building analyzer...
Running analysis...
MMSB Intelligence Substrate Analyzer
=====================================

Root directory: "/home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer"
Output directory: "/home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs"
Julia script: "/home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/src/000_main.jl"

Scanning Rust files (dependency-ordered)...
  Analyzed 72 Rust files

Building call graph...
  Call graph progress: 50/214 functions
  Call graph progress: 100/214 functions
  Call graph progress: 150/214 functions
  Call graph progress: 200/214 functions
  Call graph progress: 214/214 functions
Detecting invariants...
ðŸ” Detecting invariants...
  â”œâ”€ Detecting structural invariants (graph-based)...
     Found 0 structural invariants (from call graph)
  â”œâ”€ Enhanced structural detection (call graph from analysis)...
     Found 834 enhanced structural invariants
  â”œâ”€ Detecting semantic invariants...
     Found 230 semantic invariants
  â”œâ”€ Detecting path-intersection invariants...
     Found 0 path-intersection invariants
  â”œâ”€ Inferring layers from call graph...
     Inferred 0 layer assignments
  â””â”€ Checking for violations...

âœ… Invariants: 1064 (proven: 811, empirical: 226, heuristic: 27)
âœ… Violations: 0
Analyzing function cohesion...
  Louvain pass 1...
  Louvain pass 6...
  Louvain pass 11...
  Louvain pass 16...
  Louvain pass 21...
Analyzing directory structure...

Generating reports...
  Report: structure
  Report: call_graph
  Report: cfg
  Report: module_dependencies
  Report: module_map_mismatch
  Report: test_topology
  Report: warning_hygiene
  Report: function_analysis
  Report: layer_dependencies
  Report: file_ordering
  Report: cohesion_analysis
  Report: refactoring_plan
  Report: correction_intelligence_path_coherence
  Report: correction_intelligence_visibility
âœ… Constraint enforcement: 9 moves allowed, 9 blocked by invariants
Baseline deltas:
  directory_cohesion: 1.00 -> 1.00 (delta +0.00)
  ordering_correctness: 100.0% -> 100.0% (delta +0.0%)
  avg_function_cohesion: 0.77 -> 0.70 (delta -0.07)
  rename_ops_needed: 0 -> 68 (delta +68)
  function_relocations: 20 -> 18 (delta -2)
  Report: file_organization

Exporting program CFG...
Complete program CFG exported to /home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs/30_cfg/complete_program.dot

Generating invariant report...
ðŸ“„ Invariant report written to: /home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs/95_invariants/index.md
ðŸ“„ JSON export written to: /home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs/95_invariants/invariants.json
ðŸ“„ Conscience map written to: /home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs/95_invariants/conscience_map.md
ðŸ“„ Constraints written to: /home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs/96_constraints/refactor_constraints.json

âœ“ Analysis complete!
  Total elements: 577
  Rust files: 72
  Julia files: 0
  Output: /home/cicero-arch-omen/ai_sandbox/codex-agent/codex_sse/server-tools/MMSB/tools/mmsb-analyzer/docs

REFACTORING TODO LIST

SUMMARY:
  Phase 1 (Correctness blockers): 0
  Phase 2 (Cluster extractions): 43
  Phase 3 (Structural constraints): 0
  Phase 4 (Cohesion improvements): 9
  Phase 5 (Ordering & renames): 68

PHASE 2: CLUSTER EXTRACTION
  1. Create cluster file `src/420_dead_code_entrypoints.rs` with 16 functions (cohesion 0.68)
  2. Create cluster file `src/230_dead_code_attribute_parser.rs` with 10 functions (cohesion 0.67)
  3. Create cluster file `src/230_dead_code_attribute_parser.rs` with 11 functions (cohesion 0.35)
  4. Create cluster file `src/010_layer_utilities.rs` with 2 functions (cohesion 0.09)
  5. Move `gather_julia_files` from `src/000_dependency_analysis.rs`
  6. Move `run_dead_code_pipeline` from `src/170_layer_utilities.rs`
  7. Move `detect_intent_signals` from `src/230_dead_code_attribute_parser.rs`
  8. Move `detect_latent_markers` from `src/380_dead_code_doc_comment_parser.rs`
  9. Move `merge_doc_intent` from `src/380_dead_code_doc_comment_parser.rs`
  10. Move `build_call_graph` from `src/390_dead_code_call_graph.rs`
  11. Move `is_reachable` from `src/390_dead_code_call_graph.rs`
  12. Move `check_planned_directory` from `src/400_dead_code_intent.rs`
  13. Move `merge_intent_sources` from `src/400_dead_code_intent.rs`
  14. Move `is_reachable` from `src/430_dead_code_classifier.rs`
  15. Move `assign_confidence` from `src/440_dead_code_confidence.rs`
  16. Move `recommend_action` from `src/450_dead_code_actions.rs`
  17. Move `build_report` from `src/470_dead_code_report.rs`
  18. Move `merge_intent_map` from `src/500_dead_code_cli.rs`
  19. Move `reason_for_category` from `src/500_dead_code_cli.rs`
  20. Move `is_test_path` from `src/500_dead_code_cli.rs`
  21. Move `gather_rust_files` from `src/020_gather_rust_files.rs`
  22. Move `classify_symbol` from `src/040_classify_symbol.rs`
  23. Move `resolve_source_root` from `src/170_layer_utilities.rs`
  24. Move `allow_analysis_dir` from `src/170_layer_utilities.rs`
  25. Move `item_name` from `src/380_dead_code_doc_comment_parser.rs`
  26. Move `item_attrs` from `src/380_dead_code_doc_comment_parser.rs`
  27. Move `compute_reachability` from `src/390_dead_code_call_graph.rs`
  28. Move `is_test_only` from `src/390_dead_code_call_graph.rs`
  29. Move `collect_symbols` from `src/400_dead_code_intent.rs`
  30. Move `item_attrs` from `src/410_dead_code_test_boundaries.rs`
  31. Move `run_analysis` from `src/000_dependency_analysis.rs`
  32. Move `is_cfg_test_item` from `src/030_is_cfg_test_item.rs`
  33. Move `generate_constraints` from `src/040_refactor_constraints.rs`
  34. Move `export_program_cfg_to_path` from `src/080_cluster_011.rs`
  35. Move `main` from `src/170_layer_utilities.rs`
  36. Move `scan_doc_comments` from `src/211_dead_code_doc_comment_scanner.rs`
  37. Move `extract_doc_markers` from `src/380_dead_code_doc_comment_parser.rs`
  38. Move `build_reverse_call_graph` from `src/390_dead_code_call_graph.rs`
  39. Move `planned_directory_intent` from `src/400_dead_code_intent.rs`
  40. Move `find_test_callers` from `src/410_dead_code_test_boundaries.rs`
  41. Move `has_test_attr` from `src/410_dead_code_test_boundaries.rs`
  42. Move `layer_constrained_sort` from `src/000_dependency_analysis.rs`
  43. Move `topo_sort_within` from `src/000_dependency_analysis.rs`

PHASE 4: COHESION IMPROVEMENTS
  1. `parse_mmsb_latent_attr` from `src/230_dead_code_attribute_parser.rs` to `-`: cohesion 0.23 below threshold 0.60 (impact 0.37)
  2. `run_analysis` from `src/000_dependency_analysis.rs` to `-`: cohesion 0.20 below threshold 0.60 (impact 0.40)
  3. `scan_file_attributes` from `src/230_dead_code_attribute_parser.rs` to `-`: cohesion 0.23 below threshold 0.60 (impact 0.37)
  4. `write_intelligence_outputs_at` from `src/620_correction_plan_serializer.rs` to `-`: cohesion 0.35 below threshold 0.60 (impact 0.25)
  5. `build_directory_entry_map` from `src/000_dependency_analysis.rs` to `-`: cohesion 0.49 below threshold 0.60 (impact 0.11)
  6. `cluster_target_path` from `src/010_layer_utilities.rs` to `-`: cohesion 0.43 below threshold 0.60 (impact 0.17)
  7. `order_julia_files_by_dependency` from `src/000_dependency_analysis.rs` to `-`: cohesion 0.43 below threshold 0.60 (impact 0.17)
  8. `write_outputs` from `src/470_dead_code_report.rs` to `-`: cohesion 0.42 below threshold 0.60 (impact 0.18)
  9. `layer_constrained_sort` from `src/000_dependency_analysis.rs` to `-`: cohesion 0.57 below threshold 0.60 (impact 0.03)

PHASE 5: ORDERING & RENAMES
  1. [Rust] `MMSB/tools/mmsb-analyzer/src/030_is_cfg_test_item.rs` -> `MMSB/tools/mmsb-analyzer/src/040_is_cfg_test_item.rs`
  2. [Rust] `MMSB/tools/mmsb-analyzer/src/040_classify_symbol.rs` -> `MMSB/tools/mmsb-analyzer/src/050_classify_symbol.rs`
  3. [Rust] `MMSB/tools/mmsb-analyzer/src/060_module_resolution.rs` -> `MMSB/tools/mmsb-analyzer/src/080_module_resolution.rs`
  4. [Rust] `MMSB/tools/mmsb-analyzer/src/080_cluster_011.rs` -> `MMSB/tools/mmsb-analyzer/src/100_cluster_011.rs`
  5. [Rust] `MMSB/tools/mmsb-analyzer/src/110_structural_detector.rs` -> `MMSB/tools/mmsb-analyzer/src/130_structural_detector.rs`
  6. [Rust] `MMSB/tools/mmsb-analyzer/src/130_semantic_detector.rs` -> `MMSB/tools/mmsb-analyzer/src/150_semantic_detector.rs`
  7. [Rust] `MMSB/tools/mmsb-analyzer/src/160_invariant_integrator.rs` -> `MMSB/tools/mmsb-analyzer/src/180_invariant_integrator.rs`
  8. [Rust] `MMSB/tools/mmsb-analyzer/src/170_layer_utilities.rs` -> `MMSB/tools/mmsb-analyzer/src/190_layer_utilities.rs`
  9. [Rust] `MMSB/tools/mmsb-analyzer/src/211_dead_code_doc_comment_scanner.rs` -> `MMSB/tools/mmsb-analyzer/src/240_dead_code_doc_comment_scanner.rs`
  10. [Rust] `MMSB/tools/mmsb-analyzer/src/230_dead_code_attribute_parser.rs` -> `MMSB/tools/mmsb-analyzer/src/260_dead_code_attribute_parser.rs`
  11. [Rust] `MMSB/tools/mmsb-analyzer/src/340_main.rs` -> `MMSB/tools/mmsb-analyzer/src/370_main.rs`
  12. [Rust] `MMSB/tools/mmsb-analyzer/src/360_lib.rs` -> `MMSB/tools/mmsb-analyzer/src/390_lib.rs`
  13. [Rust] `MMSB/tools/mmsb-analyzer/src/390_dead_code_call_graph.rs` -> `MMSB/tools/mmsb-analyzer/src/420_dead_code_call_graph.rs`
  14. [Rust] `MMSB/tools/mmsb-analyzer/src/470_dead_code_report.rs` -> `MMSB/tools/mmsb-analyzer/src/500_dead_code_report.rs`
  15. [Rust] `MMSB/tools/mmsb-analyzer/src/530_violation_predictor.rs` -> `MMSB/tools/mmsb-analyzer/src/560_violation_predictor.rs`
  16. [Rust] `MMSB/tools/mmsb-analyzer/src/570_correction_plan_generator.rs` -> `MMSB/tools/mmsb-analyzer/src/600_correction_plan_generator.rs`
  17. [Rust] `MMSB/tools/mmsb-analyzer/src/580_verification_scope_planner.rs` -> `MMSB/tools/mmsb-analyzer/src/610_verification_scope_planner.rs`
  18. [Rust] `MMSB/tools/mmsb-analyzer/src/590_rollback_criteria_builder.rs` -> `MMSB/tools/mmsb-analyzer/src/620_rollback_criteria_builder.rs`
  19. [Rust] `MMSB/tools/mmsb-analyzer/src/600_quality_delta_calculator.rs` -> `MMSB/tools/mmsb-analyzer/src/630_quality_delta_calculator.rs`
  20. [Rust] `MMSB/tools/mmsb-analyzer/src/610_action_impact_estimator.rs` -> `MMSB/tools/mmsb-analyzer/src/640_action_impact_estimator.rs`
  21. [Rust] `MMSB/tools/mmsb-analyzer/src/620_correction_plan_serializer.rs` -> `MMSB/tools/mmsb-analyzer/src/650_correction_plan_serializer.rs`
  22. [Rust] `MMSB/tools/mmsb-analyzer/src/040_refactor_constraints.rs` -> `MMSB/tools/mmsb-analyzer/src/060_refactor_constraints.rs`
  23. [Rust] `MMSB/tools/mmsb-analyzer/src/050_scc_compressor.rs` -> `MMSB/tools/mmsb-analyzer/src/070_scc_compressor.rs`
  24. [Rust] `MMSB/tools/mmsb-analyzer/src/070_layer_inference.rs` -> `MMSB/tools/mmsb-analyzer/src/090_layer_inference.rs`
  25. [Rust] `MMSB/tools/mmsb-analyzer/src/090_fixpoint_solver.rs` -> `MMSB/tools/mmsb-analyzer/src/110_fixpoint_solver.rs`
  26. [Rust] `MMSB/tools/mmsb-analyzer/src/100_dependency.rs` -> `MMSB/tools/mmsb-analyzer/src/120_dependency.rs`
  27. [Rust] `MMSB/tools/mmsb-analyzer/src/120_cluster_006.rs` -> `MMSB/tools/mmsb-analyzer/src/140_cluster_006.rs`
  28. [Rust] `MMSB/tools/mmsb-analyzer/src/140_layer_core.rs` -> `MMSB/tools/mmsb-analyzer/src/160_layer_core.rs`
  29. [Rust] `MMSB/tools/mmsb-analyzer/src/150_path_detector.rs` -> `MMSB/tools/mmsb-analyzer/src/170_path_detector.rs`
  30. [Rust] `MMSB/tools/mmsb-analyzer/src/180_invariant_reporter.rs` -> `MMSB/tools/mmsb-analyzer/src/200_invariant_reporter.rs`
  31. [Rust] `MMSB/tools/mmsb-analyzer/src/190_conscience_graph.rs` -> `MMSB/tools/mmsb-analyzer/src/210_conscience_graph.rs`
  32. [Rust] `MMSB/tools/mmsb-analyzer/src/200_action_validator.rs` -> `MMSB/tools/mmsb-analyzer/src/220_action_validator.rs`
  33. [Rust] `MMSB/tools/mmsb-analyzer/src/210_agent_conscience.rs` -> `MMSB/tools/mmsb-analyzer/src/230_agent_conscience.rs`
  34. [Rust] `MMSB/tools/mmsb-analyzer/src/220_utilities.rs` -> `MMSB/tools/mmsb-analyzer/src/250_utilities.rs`
  35. [Rust] `MMSB/tools/mmsb-analyzer/src/240_types.rs` -> `MMSB/tools/mmsb-analyzer/src/270_types.rs`
  36. [Rust] `MMSB/tools/mmsb-analyzer/src/250_cohesion_analyzer.rs` -> `MMSB/tools/mmsb-analyzer/src/280_cohesion_analyzer.rs`
  37. [Rust] `MMSB/tools/mmsb-analyzer/src/260_directory_analyzer.rs` -> `MMSB/tools/mmsb-analyzer/src/290_directory_analyzer.rs`
  38. [Rust] `MMSB/tools/mmsb-analyzer/src/270_control_flow.rs` -> `MMSB/tools/mmsb-analyzer/src/300_control_flow.rs`
  39. [Rust] `MMSB/tools/mmsb-analyzer/src/280_file_ordering.rs` -> `MMSB/tools/mmsb-analyzer/src/310_file_ordering.rs`
  40. [Rust] `MMSB/tools/mmsb-analyzer/src/290_julia_parser.rs` -> `MMSB/tools/mmsb-analyzer/src/320_julia_parser.rs`
  41. [Rust] `MMSB/tools/mmsb-analyzer/src/300_rust_parser.rs` -> `MMSB/tools/mmsb-analyzer/src/330_rust_parser.rs`
  42. [Rust] `MMSB/tools/mmsb-analyzer/src/310_dot_exporter.rs` -> `MMSB/tools/mmsb-analyzer/src/340_dot_exporter.rs`
  43. [Rust] `MMSB/tools/mmsb-analyzer/src/320_file_gathering.rs` -> `MMSB/tools/mmsb-analyzer/src/350_file_gathering.rs`
  44. [Rust] `MMSB/tools/mmsb-analyzer/src/330_markdown_report.rs` -> `MMSB/tools/mmsb-analyzer/src/360_markdown_report.rs`
  45. [Rust] `MMSB/tools/mmsb-analyzer/src/350_agent_cli.rs` -> `MMSB/tools/mmsb-analyzer/src/380_agent_cli.rs`
  46. [Rust] `MMSB/tools/mmsb-analyzer/src/370_dead_code_types.rs` -> `MMSB/tools/mmsb-analyzer/src/400_dead_code_types.rs`
  47. [Rust] `MMSB/tools/mmsb-analyzer/src/380_dead_code_doc_comment_parser.rs` -> `MMSB/tools/mmsb-analyzer/src/410_dead_code_doc_comment_parser.rs`
  48. [Rust] `MMSB/tools/mmsb-analyzer/src/400_dead_code_intent.rs` -> `MMSB/tools/mmsb-analyzer/src/430_dead_code_intent.rs`
  49. [Rust] `MMSB/tools/mmsb-analyzer/src/410_dead_code_test_boundaries.rs` -> `MMSB/tools/mmsb-analyzer/src/440_dead_code_test_boundaries.rs`
  50. [Rust] `MMSB/tools/mmsb-analyzer/src/420_dead_code_entrypoints.rs` -> `MMSB/tools/mmsb-analyzer/src/450_dead_code_entrypoints.rs`
  51. [Rust] `MMSB/tools/mmsb-analyzer/src/430_dead_code_classifier.rs` -> `MMSB/tools/mmsb-analyzer/src/460_dead_code_classifier.rs`
  52. [Rust] `MMSB/tools/mmsb-analyzer/src/440_dead_code_confidence.rs` -> `MMSB/tools/mmsb-analyzer/src/470_dead_code_confidence.rs`
  53. [Rust] `MMSB/tools/mmsb-analyzer/src/450_dead_code_actions.rs` -> `MMSB/tools/mmsb-analyzer/src/480_dead_code_actions.rs`
  54. [Rust] `MMSB/tools/mmsb-analyzer/src/460_correction_plan_types.rs` -> `MMSB/tools/mmsb-analyzer/src/490_correction_plan_types.rs`
  55. [Rust] `MMSB/tools/mmsb-analyzer/src/480_dead_code_filter.rs` -> `MMSB/tools/mmsb-analyzer/src/510_dead_code_filter.rs`
  56. [Rust] `MMSB/tools/mmsb-analyzer/src/490_verification_policy_types.rs` -> `MMSB/tools/mmsb-analyzer/src/520_verification_policy_types.rs`
  57. [Rust] `MMSB/tools/mmsb-analyzer/src/500_dead_code_cli.rs` -> `MMSB/tools/mmsb-analyzer/src/530_dead_code_cli.rs`
  58. [Rust] `MMSB/tools/mmsb-analyzer/src/510_quality_delta_types.rs` -> `MMSB/tools/mmsb-analyzer/src/540_quality_delta_types.rs`
  59. [Rust] `MMSB/tools/mmsb-analyzer/src/520_dead_code_policy.rs` -> `MMSB/tools/mmsb-analyzer/src/550_dead_code_policy.rs`
  60. [Rust] `MMSB/tools/mmsb-analyzer/src/540_dead_code_report_split.rs` -> `MMSB/tools/mmsb-analyzer/src/570_dead_code_report_split.rs`
  61. [Rust] `MMSB/tools/mmsb-analyzer/src/550_tier_classifier.rs` -> `MMSB/tools/mmsb-analyzer/src/580_tier_classifier.rs`
  62. [Rust] `MMSB/tools/mmsb-analyzer/src/560_confidence_scorer.rs` -> `MMSB/tools/mmsb-analyzer/src/590_confidence_scorer.rs`
  63. [Rust] `MMSB/tools/mmsb-analyzer/src/630_verification_policy_emitter.rs` -> `MMSB/tools/mmsb-analyzer/src/660_verification_policy_emitter.rs`
  64. [Rust] `MMSB/tools/mmsb-analyzer/src/640_correction_intelligence_report.rs` -> `MMSB/tools/mmsb-analyzer/src/670_correction_intelligence_report.rs`
  65. [Rust] `MMSB/tools/mmsb-analyzer/src/admission_composition_artifact.rs` -> `MMSB/tools/mmsb-analyzer/src/680_admission_composition_artifact.rs`
  66. [Rust] `MMSB/tools/mmsb-analyzer/src/batch_admission.rs` -> `MMSB/tools/mmsb-analyzer/src/690_batch_admission.rs`
  67. [Rust] `MMSB/tools/mmsb-analyzer/src/composition_rule.rs` -> `MMSB/tools/mmsb-analyzer/src/700_composition_rule.rs`
  68. [Rust] `MMSB/tools/mmsb-analyzer/src/effect_signature_schema.rs` -> `MMSB/tools/mmsb-analyzer/src/710_effect_signature_schema.rs`

