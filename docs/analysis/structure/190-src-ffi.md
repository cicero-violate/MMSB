# Structure Group: src/ffi

## File: MMSB/src/ffi/FFIWrapper.jl

- Layer(s): root
- Language coverage: Julia (57)
- Element types: Function (46), Module (1), Struct (10)
- Total elements: 57

### Elements

- [Julia | Module] `FFIWrapper` (line 1, pub)
- [Julia | Function] `register_error_hook` (line 9, pub)
  - Signature: `register_error_hook(f::Function)`
- [Julia | Function] `_check_rust_error` (line 14, pub)
  - Signature: `_check_rust_error(context::AbstractString)`
- [Julia | Struct] `RustPageHandle` (line 19, pub)
  - Signature: `struct RustPageHandle`
- [Julia | Struct] `RustDeltaHandle` (line 23, pub)
  - Signature: `struct RustDeltaHandle`
- [Julia | Struct] `RustAllocatorHandle` (line 27, pub)
  - Signature: `struct RustAllocatorHandle`
- [Julia | Struct] `RustTLogHandle` (line 31, pub)
  - Signature: `struct RustTLogHandle`
- [Julia | Struct] `RustTLogReaderHandle` (line 35, pub)
  - Signature: `struct RustTLogReaderHandle`
- [Julia | Struct] `RustEpoch` (line 39, pub)
  - Signature: `struct RustEpoch`
- [Julia | Struct] `RustTLogSummary` (line 43, pub)
  - Signature: `struct RustTLogSummary`
- [Julia | Struct] `RustPageInfo` (line 49, pub)
  - Signature: `struct RustPageInfo`
- [Julia | Struct] `RustSemiringPairF64` (line 58, pub)
  - Signature: `struct RustSemiringPairF64`
- [Julia | Struct] `RustSemiringPairBool` (line 63, pub)
  - Signature: `struct RustSemiringPairBool`
- [Julia | Function] `rust_artifacts_available` (line 68, pub)
  - Signature: `rust_artifacts_available()`
  - Calls: isfile
- [Julia | Function] `ensure_rust_artifacts` (line 70, pub)
  - Signature: `ensure_rust_artifacts()`
  - Calls: error, rust_artifacts_available
- [Julia | Function] `rust_page_read!` (line 76, pub)
  - Signature: `rust_page_read!(handle::RustPageHandle, buffer::Vector{UInt8})`
  - Calls: UInt, ccall, ensure_rust_artifacts, isempty, length, pointer, string
- [Julia | Function] `rust_page_epoch` (line 97, pub)
  - Signature: `rust_page_epoch(handle::RustPageHandle)::UInt32`
  - Calls: UInt32, _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_page_metadata_blob` (line 104, pub)
  - Signature: `rust_page_metadata_blob(handle::RustPageHandle)::Vector{UInt8}`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts, pointer
- [Julia | Function] `rust_page_metadata_import!` (line 118, pub)
  - Signature: `rust_page_metadata_import!(handle::RustPageHandle, blob::Vector{UInt8})`
  - Calls: ccall, ensure_rust_artifacts, length, pointer
- [Julia | Function] `rust_page_write_masked!` (line 128, pub)
  - Signature: `rust_page_write_masked!(handle::RustPageHandle, mask::Vector{UInt8}, payload::Vector{UInt8}; is_sparse::Bool`
- [Julia | Function] `rust_delta_new` (line 140, pub)
  - Signature: `rust_delta_new(delta_id::UInt64, page_id::UInt64, epoch::UInt32, mask::Vector{UInt8}, payload::Vector{UInt8}, source:...`
- [Julia | Function] `rust_delta_free!` (line 153, pub)
  - Signature: `rust_delta_free!(handle::RustDeltaHandle)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_apply!` (line 160, pub)
  - Signature: `rust_delta_apply!(page::RustPageHandle, delta::RustDeltaHandle)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_allocator_new` (line 171, pub)
  - Signature: `rust_allocator_new()::RustAllocatorHandle`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_allocator_free!` (line 178, pub)
  - Signature: `rust_allocator_free!(handle::RustAllocatorHandle)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_allocator_allocate` (line 185, pub)
  - Signature: `rust_allocator_allocate( handle::RustAllocatorHandle, page_id::UInt64, size::Int, location::Int32`
- [Julia | Function] `rust_allocator_release!` (line 202, pub)
  - Signature: `rust_allocator_release!(handle::RustAllocatorHandle, page_id::UInt64)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_allocator_get_page` (line 214, pub)
  - Signature: `rust_allocator_get_page(handle::RustAllocatorHandle, page_id::UInt64)::RustPageHandle`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_new` (line 226, pub)
  - Signature: `rust_tlog_new(path::AbstractString)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_free!` (line 233, pub)
  - Signature: `rust_tlog_free!(handle::RustTLogHandle)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_append!` (line 240, pub)
  - Signature: `rust_tlog_append!(handle::RustTLogHandle, delta::RustDeltaHandle)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_reader_new` (line 247, pub)
  - Signature: `rust_tlog_reader_new(path::AbstractString)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_reader_free!` (line 254, pub)
  - Signature: `rust_tlog_reader_free!(handle::RustTLogReaderHandle)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_reader_next` (line 261, pub)
  - Signature: `rust_tlog_reader_next(handle::RustTLogReaderHandle)::RustDeltaHandle`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_tlog_summary` (line 268, pub)
  - Signature: `rust_tlog_summary(path::AbstractString)`
  - Calls: Int, RustTLogSummary, UInt32, _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_id` (line 283, pub)
  - Signature: `rust_delta_id(handle::RustDeltaHandle)::UInt64`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_page_id` (line 290, pub)
  - Signature: `rust_delta_page_id(handle::RustDeltaHandle)::UInt64`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_epoch` (line 297, pub)
  - Signature: `rust_delta_epoch(handle::RustDeltaHandle)::UInt32`
  - Calls: UInt32, _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_is_sparse` (line 304, pub)
  - Signature: `rust_delta_is_sparse(handle::RustDeltaHandle)::Bool`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_timestamp` (line 311, pub)
  - Signature: `rust_delta_timestamp(handle::RustDeltaHandle)::UInt64`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_delta_source` (line 318, pub)
  - Signature: `rust_delta_source(handle::RustDeltaHandle)::String`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts, pointer
- [Julia | Function] `rust_delta_mask` (line 334, pub)
  - Signature: `rust_delta_mask(handle::RustDeltaHandle)::Vector{UInt8}`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts, pointer
- [Julia | Function] `rust_delta_payload` (line 348, pub)
  - Signature: `rust_delta_payload(handle::RustDeltaHandle)::Vector{UInt8}`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts, pointer
- [Julia | Function] `rust_delta_set_intent_metadata!` (line 362, pub)
  - Signature: `rust_delta_set_intent_metadata!(handle::RustDeltaHandle, metadata::Union{Nothing,AbstractString})`
  - Calls: String, _check_rust_error, ccall, codeunits, ensure_rust_artifacts, length, pointer
- [Julia | Function] `rust_delta_intent_metadata` (line 379, pub)
  - Signature: `rust_delta_intent_metadata(handle::RustDeltaHandle)::Union{Nothing,String}`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts, pointer
- [Julia | Function] `rust_checkpoint_write!` (line 393, pub)
  - Signature: `rust_checkpoint_write!(allocator::RustAllocatorHandle, log::RustTLogHandle, path::AbstractString)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_checkpoint_load!` (line 402, pub)
  - Signature: `rust_checkpoint_load!(allocator::RustAllocatorHandle, log::RustTLogHandle, path::AbstractString)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_allocator_page_infos` (line 411, pub)
  - Signature: `rust_allocator_page_infos(handle::RustAllocatorHandle)::Vector{RustPageInfo}`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts, pointer
- [Julia | Function] `rust_allocator_acquire_page` (line 426, pub)
  - Signature: `rust_allocator_acquire_page(handle::RustAllocatorHandle, page_id::UInt64)::RustPageHandle`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_get_last_error` (line 434, pub)
  - Signature: `rust_get_last_error()::Int32`
  - Calls: ccall, ensure_rust_artifacts
- [Julia | Function] `rust_semiring_tropical_fold_add` (line 439, pub)
  - Signature: `rust_semiring_tropical_fold_add(values::Vector{Float64})::Float64`
  - Calls: ccall, ensure_rust_artifacts, isempty, length, pointer
- [Julia | Function] `rust_semiring_tropical_fold_mul` (line 450, pub)
  - Signature: `rust_semiring_tropical_fold_mul(values::Vector{Float64})::Float64`
  - Calls: ccall, ensure_rust_artifacts, isempty, length, pointer
- [Julia | Function] `rust_semiring_tropical_accumulate` (line 461, pub)
  - Signature: `rust_semiring_tropical_accumulate(left::Float64, right::Float64)`
  - Calls: _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `rust_semiring_boolean_fold_add` (line 469, pub)
  - Signature: `rust_semiring_boolean_fold_add(values::Vector{UInt8})::Bool`
  - Calls: ccall, ensure_rust_artifacts, isempty, length, pointer
- [Julia | Function] `rust_semiring_boolean_fold_mul` (line 480, pub)
  - Signature: `rust_semiring_boolean_fold_mul(values::Vector{UInt8})::Bool`
  - Calls: ccall, ensure_rust_artifacts, isempty, length, pointer
- [Julia | Function] `rust_semiring_boolean_accumulate` (line 491, pub)
  - Signature: `rust_semiring_boolean_accumulate(left::Bool, right::Bool)`
  - Calls: UInt8, _check_rust_error, ccall, ensure_rust_artifacts
- [Julia | Function] `isnull` (line 499, pub)
  - Signature: `isnull(handle)`

## File: MMSB/src/ffi/RustErrors.jl

- Layer(s): root
- Language coverage: Julia (6)
- Element types: Function (4), Module (1), Struct (1)
- Total elements: 6

### Elements

- [Julia | Module] `RustErrors` (line 1, pub)
- [Julia | Struct] `RustFFIError` (line 26, pub)
  - Signature: `struct RustFFIError <: Exception`
- [Julia | Function] `Base.showerror` (line 31, pub)
  - Signature: `Base.showerror(io::IO, err::RustFFIError)`
  - Calls: get, print
- [Julia | Function] `check_rust_error` (line 36, pub)
  - Signature: `check_rust_error(context::AbstractString)`
  - Calls: RustFFIError, String, rust_get_last_error, throw
- [Julia | Function] `_default_message` (line 42, pub)
  - Signature: `_default_message(err::RustFFIError)`
  - Calls: error, get
- [Julia | Function] `translate_error` (line 47, pub)
  - Signature: `translate_error(err::RustFFIError; message::Union{Nothing,String}`

