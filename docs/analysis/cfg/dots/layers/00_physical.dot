digraph LayerCFG {
  rankdir=TB;
  compound=true;
  newrank=true;

  label="00_physical - 31 functions from 5 files";
  labelloc=t;
  fontsize=18;

  subgraph cluster_1 {
    label="CPUPropagationQueue (DeviceFallback.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f1_n1 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f1_n2 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f1_n3 [label="BB1 L16", shape=box, fillcolor=lightblue, style="filled"];

    f1_n1 -> f1_n3;
    f1_n3 -> f1_n2;
  }

  subgraph cluster_2 {
    label="allocate_page_arrays (PageAllocator.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f2_n4 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f2_n5 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f2_n6 [label="BB1 L102", shape=box, fillcolor=lightblue, style="filled"];

    f2_n4 -> f2_n6;
    f2_n6 -> f2_n5;
  }

  subgraph cluster_3 {
    label="async_sync_page_to_gpu! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f3_n7 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f3_n8 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f3_n9 [label="BB1 L225", shape=box, fillcolor=lightblue, style="filled"];

    f3_n7 -> f3_n9;
    f3_n9 -> f3_n8;
  }

  subgraph cluster_4 {
    label="batch_sync_to_cpu! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f4_n10 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f4_n11 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f4_n12 [label="BB1 L283", shape=box, fillcolor=lightblue, style="filled"];

    f4_n10 -> f4_n12;
    f4_n12 -> f4_n11;
  }

  subgraph cluster_5 {
    label="batch_sync_to_gpu! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f5_n13 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f5_n14 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f5_n15 [label="BB1 L256", shape=box, fillcolor=lightblue, style="filled"];

    f5_n13 -> f5_n15;
    f5_n15 -> f5_n14;
  }

  subgraph cluster_6 {
    label="convert_to_unified! (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f6_n16 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f6_n17 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f6_n18 [label="BB1 L252", shape=box, fillcolor=lightblue, style="filled"];

    f6_n16 -> f6_n18;
    f6_n18 -> f6_n17;
  }

  subgraph cluster_7 {
    label="deallocate_to_pool (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f7_n19 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f7_n20 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f7_n21 [label="BB1 L69", shape=box, fillcolor=lightblue, style="filled"];

    f7_n19 -> f7_n21;
    f7_n21 -> f7_n20;
  }

  subgraph cluster_8 {
    label="delete_page! (PageAllocator.jl, CC=5)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f8_n22 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f8_n23 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f8_n24 [label="BB1 L52,53", shape=box, fillcolor=lightblue, style="filled"];
    f8_n25 [label="LOOP2 L54", shape=box, fillcolor=orange, style="filled,rounded"];
    f8_n26 [label="BB3 L55", shape=box, fillcolor=lightblue, style="filled"];
    f8_n27 [label="LOOP4 L57", shape=box, fillcolor=orange, style="filled,rounded"];
    f8_n28 [label="BB5 L58", shape=box, fillcolor=lightblue, style="filled"];
    f8_n29 [label="RETURN6 L60,67,68", shape=box, fillcolor=lightblue, style="filled"];

    f8_n22 -> f8_n24;
    f8_n24 -> f8_n25;
    f8_n25 -> f8_n26 [label="T", color="darkgreen"];
    f8_n26 -> f8_n25;
    f8_n25 -> f8_n27 [label="F", color="red"];
    f8_n26 -> f8_n27;
    f8_n27 -> f8_n28 [label="T", color="darkgreen"];
    f8_n28 -> f8_n27;
    f8_n27 -> f8_n29 [label="F", color="red"];
    f8_n28 -> f8_n29;
    f8_n29 -> f8_n23;
  }

  subgraph cluster_9 {
    label="delta_merge_kernel! (GPUKernels.jl, CC=3)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f9_n30 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f9_n31 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f9_n32 [label="BB1 L38", shape=box, fillcolor=lightblue, style="filled"];
    f9_n33 [label="BRANCH2 L39", shape=diamond, fillcolor=yellow, style="filled"];
    f9_n34 [label="BRANCH3 L40", shape=diamond, fillcolor=yellow, style="filled"];
    f9_n35 [label="BB4 L41", shape=box, fillcolor=lightblue, style="filled"];
    f9_n36 [label="RETURN5 L44", shape=box, fillcolor=lightblue, style="filled"];

    f9_n30 -> f9_n32;
    f9_n32 -> f9_n33;
    f9_n33 -> f9_n34 [label="T", color="darkgreen"];
    f9_n33 -> f9_n35 [label="F", color="red"];
    f9_n34 -> f9_n35 [label="T", color="darkgreen"];
    f9_n34 -> f9_n36 [label="F", color="red"];
    f9_n35 -> f9_n36;
    f9_n36 -> f9_n31;
  }

  subgraph cluster_10 {
    label="disable_read_mostly_hint! (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f10_n37 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f10_n38 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f10_n39 [label="BB1 L295", shape=box, fillcolor=lightblue, style="filled"];

    f10_n37 -> f10_n39;
    f10_n39 -> f10_n38;
  }

  subgraph cluster_11 {
    label="enable_read_mostly_hint! (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f11_n40 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f11_n41 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f11_n42 [label="BB1 L281", shape=box, fillcolor=lightblue, style="filled"];

    f11_n40 -> f11_n42;
    f11_n42 -> f11_n41;
  }

  subgraph cluster_12 {
    label="enqueue_propagation_command (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f12_n43 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f12_n44 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f12_n45 [label="BB1 L65", shape=box, fillcolor=lightblue, style="filled"];

    f12_n43 -> f12_n45;
    f12_n45 -> f12_n44;
  }

  subgraph cluster_13 {
    label="fallback_to_cpu (DeviceFallback.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f13_n46 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f13_n47 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f13_n48 [label="BB1 L17", shape=box, fillcolor=lightblue, style="filled"];

    f13_n46 -> f13_n48;
    f13_n48 -> f13_n47;
  }

  subgraph cluster_14 {
    label="has_gpu_support (DeviceFallback.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f14_n49 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f14_n50 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f14_n51 [label="BB1 L10", shape=box, fillcolor=lightblue, style="filled"];

    f14_n49 -> f14_n51;
    f14_n51 -> f14_n50;
  }

  subgraph cluster_15 {
    label="launch_delta_merge! (GPUKernels.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f15_n52 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f15_n53 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f15_n54 [label="RETURN1 L67,68,69,70", shape=box, fillcolor=lightblue, style="filled"];

    f15_n52 -> f15_n54;
    f15_n54 -> f15_n53;
  }

  subgraph cluster_16 {
    label="launch_page_compare! (GPUKernels.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f16_n55 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f16_n56 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f16_n57 [label="RETURN1 L165,166,167,168", shape=box, fillcolor=lightblue, style="filled"];

    f16_n55 -> f16_n57;
    f16_n57 -> f16_n56;
  }

  subgraph cluster_17 {
    label="launch_page_copy! (GPUKernels.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f17_n58 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f17_n59 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f17_n60 [label="RETURN1 L105,106,107", shape=box, fillcolor=lightblue, style="filled"];

    f17_n58 -> f17_n60;
    f17_n60 -> f17_n59;
  }

  subgraph cluster_18 {
    label="launch_page_zero! (GPUKernels.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f18_n61 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f18_n62 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f18_n63 [label="RETURN1 L129,130,131", shape=box, fillcolor=lightblue, style="filled"];

    f18_n61 -> f18_n63;
    f18_n63 -> f18_n62;
  }

  subgraph cluster_19 {
    label="launch_sparse_delta_apply! (GPUKernels.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f19_n64 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f19_n65 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f19_n66 [label="RETURN1 L211,212,213,214,215", shape=box, fillcolor=lightblue, style="filled"];

    f19_n64 -> f19_n66;
    f19_n66 -> f19_n65;
  }

  subgraph cluster_20 {
    label="page_compare_kernel! (GPUKernels.jl, CC=2)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f20_n67 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f20_n68 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f20_n69 [label="BB1 L148", shape=box, fillcolor=lightblue, style="filled"];
    f20_n70 [label="BRANCH2 L149", shape=diamond, fillcolor=yellow, style="filled"];
    f20_n71 [label="BB3 L150", shape=box, fillcolor=lightblue, style="filled"];
    f20_n72 [label="RETURN4 L152", shape=box, fillcolor=lightblue, style="filled"];

    f20_n67 -> f20_n69;
    f20_n69 -> f20_n70;
    f20_n70 -> f20_n71 [label="T", color="darkgreen"];
    f20_n70 -> f20_n72 [label="F", color="red"];
    f20_n71 -> f20_n72;
    f20_n72 -> f20_n68;
  }

  subgraph cluster_21 {
    label="page_copy_kernel! (GPUKernels.jl, CC=2)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f21_n73 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f21_n74 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f21_n75 [label="BB1 L88", shape=box, fillcolor=lightblue, style="filled"];
    f21_n76 [label="BRANCH2 L89", shape=diamond, fillcolor=yellow, style="filled"];
    f21_n77 [label="BB3 L90", shape=box, fillcolor=lightblue, style="filled"];
    f21_n78 [label="RETURN4 L92", shape=box, fillcolor=lightblue, style="filled"];

    f21_n73 -> f21_n75;
    f21_n75 -> f21_n76;
    f21_n76 -> f21_n77 [label="T", color="darkgreen"];
    f21_n76 -> f21_n78 [label="F", color="red"];
    f21_n77 -> f21_n78;
    f21_n78 -> f21_n74;
  }

  subgraph cluster_22 {
    label="page_zero_kernel! (GPUKernels.jl, CC=2)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f22_n79 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f22_n80 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f22_n81 [label="BB1 L116", shape=box, fillcolor=lightblue, style="filled"];
    f22_n82 [label="BRANCH2 L117", shape=diamond, fillcolor=yellow, style="filled"];
    f22_n83 [label="BB3 L118", shape=box, fillcolor=lightblue, style="filled"];
    f22_n84 [label="RETURN4 L120", shape=box, fillcolor=lightblue, style="filled"];

    f22_n79 -> f22_n81;
    f22_n81 -> f22_n82;
    f22_n82 -> f22_n83 [label="T", color="darkgreen"];
    f22_n82 -> f22_n84 [label="F", color="red"];
    f22_n83 -> f22_n84;
    f22_n84 -> f22_n80;
  }

  subgraph cluster_23 {
    label="prefetch_pages_to_gpu! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f23_n85 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f23_n86 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f23_n87 [label="BB1 L354", shape=box, fillcolor=lightblue, style="filled"];

    f23_n85 -> f23_n87;
    f23_n87 -> f23_n86;
  }

  subgraph cluster_24 {
    label="prefetch_unified_to_cpu! (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f24_n88 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f24_n89 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f24_n90 [label="BB1 L171", shape=box, fillcolor=lightblue, style="filled"];
    f24_n91 [label="BRANCH2 L173", shape=diamond, fillcolor=yellow, style="filled"];
    f24_n92 [label="BB3 L175,179", shape=box, fillcolor=lightblue, style="filled"];

    f24_n88 -> f24_n90;
    f24_n90 -> f24_n91;
    f24_n91 -> f24_n92 [label="T", color="darkgreen"];
    f24_n92 -> f24_n89;
  }

  subgraph cluster_25 {
    label="prefetch_unified_to_gpu! (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f25_n93 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f25_n94 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f25_n95 [label="BB1 L149", shape=box, fillcolor=lightblue, style="filled"];
    f25_n96 [label="BRANCH2 L151", shape=diamond, fillcolor=yellow, style="filled"];
    f25_n97 [label="BB3 L153,158", shape=box, fillcolor=lightblue, style="filled"];

    f25_n93 -> f25_n95;
    f25_n95 -> f25_n96;
    f25_n96 -> f25_n97 [label="T", color="darkgreen"];
    f25_n97 -> f25_n94;
  }

  subgraph cluster_26 {
    label="set_preferred_location! (UnifiedMemory.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f26_n98 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f26_n99 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f26_n100 [label="BB1 L228", shape=box, fillcolor=lightblue, style="filled"];

    f26_n98 -> f26_n100;
    f26_n100 -> f26_n99;
  }

  subgraph cluster_27 {
    label="sparse_delta_apply_kernel! (GPUKernels.jl, CC=2)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f27_n101 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f27_n102 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f27_n103 [label="BB1 L193", shape=box, fillcolor=lightblue, style="filled"];
    f27_n104 [label="BRANCH2 L194", shape=diamond, fillcolor=yellow, style="filled"];
    f27_n105 [label="BB3 L195,196", shape=box, fillcolor=lightblue, style="filled"];
    f27_n106 [label="RETURN4 L198", shape=box, fillcolor=lightblue, style="filled"];

    f27_n101 -> f27_n103;
    f27_n103 -> f27_n104;
    f27_n104 -> f27_n105 [label="T", color="darkgreen"];
    f27_n104 -> f27_n106 [label="F", color="red"];
    f27_n105 -> f27_n106;
    f27_n106 -> f27_n102;
  }

  subgraph cluster_28 {
    label="sync_bidirectional! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f28_n107 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f28_n108 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f28_n109 [label="BB1 L167", shape=box, fillcolor=lightblue, style="filled"];

    f28_n107 -> f28_n109;
    f28_n109 -> f28_n108;
  }

  subgraph cluster_29 {
    label="sync_page_to_cpu! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f29_n110 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f29_n111 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f29_n112 [label="BB1 L133", shape=box, fillcolor=lightblue, style="filled"];

    f29_n110 -> f29_n112;
    f29_n112 -> f29_n111;
  }

  subgraph cluster_30 {
    label="sync_page_to_gpu! (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f30_n113 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f30_n114 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f30_n115 [label="BB1 L102", shape=box, fillcolor=lightblue, style="filled"];

    f30_n113 -> f30_n115;
    f30_n115 -> f30_n114;
  }

  subgraph cluster_31 {
    label="wait_gpu_queue (DeviceSync.jl, CC=1)";
    style=filled;
    fillcolor=lightgray;
    color=black;

    f31_n116 [label="ENTRY", shape=ellipse, fillcolor=lightgreen, style="filled,bold"];
    f31_n117 [label="EXIT", shape=doubleoctagon, fillcolor=lightcoral, style="filled,bold"];
    f31_n118 [label="BB1 L75,76,77,79,80", shape=box, fillcolor=lightblue, style="filled"];

    f31_n116 -> f31_n118;
    f31_n118 -> f31_n117;
  }

  // Inter-function calls
  edge [style=dashed, color=blue, penwidth=2];

  f1_n2 -> f1_n1 [ltail=cluster_1, lhead=cluster_1, label="call"];
  f15_n53 -> f9_n30 [ltail=cluster_15, lhead=cluster_9, label="call"];
  f17_n59 -> f21_n73 [ltail=cluster_17, lhead=cluster_21, label="call"];
  f18_n62 -> f22_n79 [ltail=cluster_18, lhead=cluster_22, label="call"];
  f16_n56 -> f20_n67 [ltail=cluster_16, lhead=cluster_20, label="call"];
  f19_n65 -> f27_n101 [ltail=cluster_19, lhead=cluster_27, label="call"];
}
