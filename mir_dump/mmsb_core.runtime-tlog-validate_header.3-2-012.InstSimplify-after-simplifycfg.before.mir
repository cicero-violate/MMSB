// MIR for `runtime::tlog::validate_header` before InstSimplify-after-simplifycfg

fn validate_header(_1: &mut BufReader<File>) -> Result<(), std::io::Error> {
    debug reader => _1;
    let mut _0: std::result::Result<(), std::io::Error>;
    let _2: u64;
    let mut _3: std::ops::ControlFlow<std::result::Result<std::convert::Infallible, std::io::Error>, u64>;
    let mut _4: std::result::Result<u64, std::io::Error>;
    let mut _5: &mut std::io::BufReader<std::fs::File>;
    let mut _6: std::io::SeekFrom;
    let mut _7: isize;
    let _8: std::result::Result<std::convert::Infallible, std::io::Error>;
    let mut _9: !;
    let mut _10: std::result::Result<std::convert::Infallible, std::io::Error>;
    let _11: u64;
    let mut _12: [u8; 8];
    let _13: ();
    let mut _14: std::ops::ControlFlow<std::result::Result<std::convert::Infallible, std::io::Error>>;
    let mut _15: std::result::Result<(), std::io::Error>;
    let mut _16: &mut std::io::BufReader<std::fs::File>;
    let mut _17: &mut [u8];
    let mut _18: &mut [u8; 8];
    let mut _19: &mut [u8; 8];
    let mut _20: isize;
    let mut _22: !;
    let mut _23: std::result::Result<std::convert::Infallible, std::io::Error>;
    let _25: ();
    let mut _26: bool;
    let mut _27: &&[u8; 8];
    let _28: &[u8; 8];
    let mut _29: &&[u8];
    let _30: &[u8];
    let mut _31: !;
    let mut _32: std::io::Error;
    let mut _33: std::io::ErrorKind;
    let _35: ();
    let mut _36: std::ops::ControlFlow<std::result::Result<std::convert::Infallible, std::io::Error>>;
    let mut _37: std::result::Result<(), std::io::Error>;
    let mut _38: &mut std::io::BufReader<std::fs::File>;
    let mut _39: &mut [u8];
    let mut _40: &mut [u8; 4];
    let mut _41: &mut [u8; 4];
    let mut _42: isize;
    let mut _44: !;
    let mut _45: std::result::Result<std::convert::Infallible, std::io::Error>;
    let mut _48: [u8; 4];
    let _49: ();
    let mut _50: bool;
    let mut _51: u32;
    let mut _52: !;
    let mut _53: std::io::Error;
    let mut _54: std::io::ErrorKind;
    let mut _55: ();
    let mut _57: isize;
    let mut _58: isize;
    let mut _59: isize;
    let mut _60: isize;
    let mut _61: isize;
    let mut _62: isize;
    let mut _63: isize;
    let mut _64: isize;
    let mut _65: isize;
    let mut _66: isize;
    let mut _67: isize;
    let mut _68: isize;
    let mut _69: isize;
    let mut _70: isize;
    let mut _71: isize;
    scope 1 {
        debug residual => _8;
        scope 2 {
        }
    }
    scope 3 {
        debug val => _11;
        scope 4 {
        }
    }
    scope 5 {
        debug magic => _12;
        let _21: std::result::Result<std::convert::Infallible, std::io::Error>;
        let _24: ();
        let mut _34: [u8; 4];
        let mut _56: &&[u8];
        scope 6 {
            debug residual => _21;
            scope 7 {
            }
        }
        scope 8 {
            debug val => const ();
            scope 9 {
            }
        }
        scope 10 {
            debug version_bytes => _34;
            let _43: std::result::Result<std::convert::Infallible, std::io::Error>;
            let _46: ();
            let _47: u32;
            scope 11 {
                debug residual => _43;
                scope 12 {
                }
            }
            scope 13 {
                debug val => const ();
                scope 14 {
                }
            }
            scope 15 {
                debug version => _47;
            }
        }
    }

    bb0: {
        _5 = copy _1;
        _6 = Start(const 0_u64);
        _4 = <BufReader<File> as Seek>::seek(move _5, move _6) -> [return: bb1, unwind continue];
    }

    bb1: {
        _3 = <Result<u64, std::io::Error> as Try>::branch(move _4) -> [return: bb2, unwind: bb26];
    }

    bb2: {
        _7 = discriminant(_3);
        switchInt(move _7) -> [0: bb4, 1: bb5, otherwise: bb3];
    }

    bb3: {
        unreachable;
    }

    bb4: {
        _11 = copy ((_3 as Continue).0: u64);
        _2 = copy _11;
        _57 = discriminant(_3);
        _12 = [const 0_u8; 8];
        _16 = copy _1;
        _19 = &mut _12;
        _18 = copy _19;
        _17 = move _18 as &mut [u8] (PointerCoercion(Unsize, Implicit));
        _15 = <BufReader<File> as std::io::Read>::read_exact(move _16, move _17) -> [return: bb7, unwind continue];
    }

    bb5: {
        _8 = move ((_3 as Break).0: std::result::Result<std::convert::Infallible, std::io::Error>);
        _10 = move _8;
        _0 = <Result<(), std::io::Error> as FromResidual<Result<Infallible, std::io::Error>>>::from_residual(move _10) -> [return: bb6, unwind: bb29];
    }

    bb6: {
        _67 = discriminant(_3);
        goto -> bb25;
    }

    bb7: {
        _14 = <Result<(), std::io::Error> as Try>::branch(move _15) -> [return: bb8, unwind: bb26];
    }

    bb8: {
        _20 = discriminant(_14);
        switchInt(move _20) -> [0: bb9, 1: bb10, otherwise: bb3];
    }

    bb9: {
        _59 = discriminant(_14);
        _28 = &_12;
        _27 = &_28;
        _56 = const runtime::tlog::validate_header::promoted[0];
        _29 = copy _56;
        _26 = <&[u8; 8] as PartialEq<&[u8]>>::ne(move _27, move _29) -> [return: bb12, unwind continue];
    }

    bb10: {
        _21 = move ((_14 as Break).0: std::result::Result<std::convert::Infallible, std::io::Error>);
        _23 = move _21;
        _0 = <Result<(), std::io::Error> as FromResidual<Result<Infallible, std::io::Error>>>::from_residual(move _23) -> [return: bb11, unwind: bb28];
    }

    bb11: {
        _65 = discriminant(_14);
        goto -> bb25;
    }

    bb12: {
        switchInt(move _26) -> [0: bb15, otherwise: bb13];
    }

    bb13: {
        _33 = InvalidData;
        _32 = std::io::Error::new::<&str>(move _33, const "invalid transaction log magic") -> [return: bb14, unwind continue];
    }

    bb14: {
        _0 = Result::<(), std::io::Error>::Err(move _32);
        goto -> bb25;
    }

    bb15: {
        _34 = [const 0_u8; 4];
        _38 = copy _1;
        _41 = &mut _34;
        _40 = copy _41;
        _39 = move _40 as &mut [u8] (PointerCoercion(Unsize, Implicit));
        _37 = <BufReader<File> as std::io::Read>::read_exact(move _38, move _39) -> [return: bb16, unwind continue];
    }

    bb16: {
        _36 = <Result<(), std::io::Error> as Try>::branch(move _37) -> [return: bb17, unwind: bb26];
    }

    bb17: {
        _42 = discriminant(_36);
        switchInt(move _42) -> [0: bb18, 1: bb19, otherwise: bb3];
    }

    bb18: {
        _61 = discriminant(_36);
        _48 = copy _34;
        _47 = core::num::<impl u32>::from_le_bytes(move _48) -> [return: bb21, unwind continue];
    }

    bb19: {
        _43 = move ((_36 as Break).0: std::result::Result<std::convert::Infallible, std::io::Error>);
        _45 = move _43;
        _0 = <Result<(), std::io::Error> as FromResidual<Result<Infallible, std::io::Error>>>::from_residual(move _45) -> [return: bb20, unwind: bb27];
    }

    bb20: {
        _63 = discriminant(_36);
        goto -> bb25;
    }

    bb21: {
        _51 = copy _47;
        _50 = Ne(move _51, const runtime::tlog::VERSION);
        switchInt(move _50) -> [0: bb24, otherwise: bb22];
    }

    bb22: {
        _54 = InvalidData;
        _53 = std::io::Error::new::<&str>(move _54, const "unsupported transaction log version") -> [return: bb23, unwind continue];
    }

    bb23: {
        _0 = Result::<(), std::io::Error>::Err(move _53);
        goto -> bb25;
    }

    bb24: {
        _0 = Result::<(), std::io::Error>::Ok(const ());
        goto -> bb25;
    }

    bb25: {
        return;
    }

    bb26 (cleanup): {
        resume;
    }

    bb27 (cleanup): {
        _69 = discriminant(_36);
        goto -> bb26;
    }

    bb28 (cleanup): {
        _70 = discriminant(_14);
        goto -> bb26;
    }

    bb29 (cleanup): {
        _71 = discriminant(_3);
        goto -> bb26;
    }
}

alloc425 (size: 35, align: 1) {
    0x00 │ 75 6e 73 75 70 70 6f 72 74 65 64 20 74 72 61 6e │ unsupported tran
    0x10 │ 73 61 63 74 69 6f 6e 20 6c 6f 67 20 76 65 72 73 │ saction log vers
    0x20 │ 69 6f 6e                                        │ ion
}

alloc424 (size: 29, align: 1) {
    0x00 │ 69 6e 76 61 6c 69 64 20 74 72 61 6e 73 61 63 74 │ invalid transact
    0x10 │ 69 6f 6e 20 6c 6f 67 20 6d 61 67 69 63          │ ion log magic
}
